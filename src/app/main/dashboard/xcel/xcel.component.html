@if (step == 1){
    <dialog #modalRef class="modal">
        <div class="modal-box w-[70%] lg:max-w-[28%] mx-2 sm:mx-4 md:mx-auto">
            @if(paymentLoading){
                <div class="w-[full] flex flex-col justify-center items-center">
                    <div class="mt-4 px-4 py-1 bg-blue-100 bg-opacity-60 dark:bg-opacity-60 text-blue-800 text-sm font-medium rounded-full inline-flex items-center ">
                        <svg class="w-4 h-4 mr-1.5" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" 
                                  stroke="currentColor" 
                                  stroke-width="1.5" 
                                  stroke-linecap="round" 
                                  stroke-linejoin="round"
                                  fill="none"/>
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" 
                                  fill="currentColor" 
                                  fill-opacity="0.2"/>
                          </svg>
                        <span class="text-[11px]">Secured Transaction</span>
                      </div>
                      <hr>
                      <ng-lottie class="mt-[-60px]"
                      [options]="options"
                      width="200px"
                      height="200px"
                    />
                    <h3 class=" sm:text-lg md:text-xl font-medium mt-[-60px]">Confirming Transaction</h3>
                    <p class="text-[11px] text-gray-500 text-center" >Kindly approve the prompt sent to you</p>
                  
                  <div class=" px-4 py-2 bg-blue-100 mt-[5px]  bg-opacity-60  text-blue-800 text-sm font-medium rounded-full inline-flex items-center animate-pulse">
                    <svg class="w-3 h-3 mr-1.5 animate-spin" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="text-[12px]">{{ displayTime }}s remaining</span>
                  </div>
                 
                </div>
            } @else{
                <div class="w-full">
                    <h3 class=" sm:text-lg md:text-xl font-medium">Feedback</h3>
                    <p class="!leading-snug mb-3 text-gray-600 font-normal !text-[13px] sm:text-base">
                        We can’t confirm this transaction yet, but we’ll update you soon.
                      </p>
                      
                      <div class="flex flex-col sm:flex-row justify-end items-center w-full gap-2 sm:gap-3">
                        <button class="w-full sm:w-auto !outline-none border-[1px] p-1 px-3 sm:px-4 rounded-md border-gray-200 !text-[13px] !leading-snug ">Close payment and wait for feedback</button>
                        <button (click)="checkAgain()" class="w-full sm:w-auto py-1 lg:p-1 !px-4 sm:px-4 rounded-md bg-[#003e78] text-white !text-[14px] !leading-snug ">Check again</button>
                      </div>
                  </div>
              
            }
             
          
          </div>
      
      </dialog>
    <div>
        <p class="title">Pay with XCEL</p>
        <p class="desc mt-1">Please enter your registered XCEL wallet number</p>
    
        <div class="mt-6">
            <div>
                <div class="mb-1 flex justify-between flex-wrap items-center gap-4">
                    <label class="input-label">XCEL Wallet Number</label>
    
                    @if (walletDetails) {
                        <p class="flex gap-2 items-center font-semibold">
                            <span class="text-[#0095FF] text-sm">{{walletDetails?.first_name}} {{walletDetails?.last_name}}</span>
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12Z" fill="#4BD37B"/>
                                <path d="M8.80017 2.3999L4.60017 6.7199L3.20017 5.2799L1.80017 6.7199L4.60017 9.5999L10.2002 3.8399L8.80017 2.3999Z" fill="white"/>
                            </svg>                                                
                        </p>
                    }
                </div>
                <form [formGroup]="walletForm" class="flex gap-1 w-full items-center">
                    <div class="w-2/6 md:w-1/5 lg:w-1/6">
                      <input 
                        class="text-center input-field px-1 md:px-2" 
                        formControlName="country_code" 
                      />
                    </div>
                    <div class="w-4/6 md:w-4/5 lg:w-5/6">
                      <input
                        class="input-field"
                        placeholder="Wallet Number"
                        formControlName="wallet_number"
                        maxlength="10"
                        (keypress)="miscService.preventLetter($event)"
                      />
                    </div>
                  </form>
            </div>
    
            @if (!walletDetails) {
                <button [disabled]="walletForm.invalid || loadingWallet"
                    (click)="verifyWallet()" class="primaty-btn mt-4">
                    @if (loadingWallet) {
                        <div class="flex justify-center items-center">
                            <span class="custom-loader"></span>
                        </div>
                    } @else {
                        Verify
                    }
                </button>
            } @else {
                <button [disabled]="loadingPayment"
                    (click)="proceed()" class="primaty-btn mt-4">
                    @if (loadingPayment) {
                        <div class="flex justify-center items-center">
                            <span class="custom-loader"></span>
                        </div>
                    } @else {
                        Proceed
                    }
                </button>
            }
        </div>
    </div>
}
